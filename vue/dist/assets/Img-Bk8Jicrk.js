import{k as u,l as x,b as V,m as E,o,c,a as l,u as s,n as b,e as d,t as k,q as y}from"./index-UOWaqe6Y.js";const N="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20fill='gold'%20t='1719032772749'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5191'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M401.066667%20512l302.933333%20302.933333-59.733333%2059.733334L341.333333%20571.733333%20281.6%20512%20341.333333%20452.266667l302.933334-302.933334%2059.733333%2059.733334L401.066667%20512z'%20p-id='5192'%3e%3c/path%3e%3c/svg%3e",P="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20fill='gold'%20t='1719032809466'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='6301'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M761.055557%20532.128047c0.512619-0.992555%201.343475-1.823411%201.792447-2.848649%208.800538-18.304636%205.919204-40.703346-9.664077-55.424808L399.935923%20139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168%201.888778-18.208305%2019.264507-17.375729%2049.631179%201.888778%2067.872168l316.960409%20299.839269L335.199677%20813.631716c-19.071845%2018.399247-19.648112%2048.767639-1.247144%2067.872168%209.407768%209.791372%2021.984142%2014.688778%2034.560516%2014.688778%2012.000108%200%2024.000215-4.479398%2033.311652-13.439914l350.048434-337.375729c0.672598-0.672598%200.927187-1.599785%201.599785-2.303346%200.512619-0.479935%201.056202-0.832576%201.567101-1.343475C757.759656%20538.879828%20759.199462%20535.391265%20761.055557%20532.128047z'%20p-id='6302'%3e%3c/path%3e%3c/svg%3e",S="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1719028342625'%20class='icon'%20viewBox='0%200%201024%201024'%20fill='gold'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4235'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M874.057143%20149.942857a512%20512%200%201%200%200%20724.114286%20512%20512%200%200%200%200-724.114286zM687.908571%20636.16a25.782857%2025.782857%200%200%201%200%2036.571429l-15.542857%2015.542857a25.782857%2025.782857%200%200%201-36.571428%200L512%20563.748571l-124.16%20124.16a25.782857%2025.782857%200%200%201-36.571429%200l-15.542857-15.542857a25.782857%2025.782857%200%200%201%200-36.571428L460.251429%20512l-124.16-124.16a25.782857%2025.782857%200%200%201%200-36.571429l15.542857-15.542857a25.782857%2025.782857%200%200%201%2036.571428%200L512%20460.251429l124.16-124.16a25.782857%2025.782857%200%200%201%2036.571429%200l15.542857%2015.542857a25.782857%2025.782857%200%200%201%200%2036.571428L563.748571%20512z'%20p-id='4236'%3e%3c/path%3e%3c/svg%3e",U=["src","alt","title"],z={key:0,class:"loading"},M={key:1,class:"img_bottom_bar"},O={key:0},W=l("img",{src:N,alt:"上一张",title:"上一张",class:"left_img"},null,-1),Y=[W],j={class:"mid_img_c"},R={key:0},$=l("img",{src:P,alt:"下一张",title:"下一张",class:"right_img"},null,-1),q=[$],F={__name:"Img",props:{imgs:Array,img_class:{type:Object,default(p){return{}}}},setup(p){const C=p,{imgs:v,img_class:D}=C,a=v.length;let n=u(0),i=u(!1),m=u(!1),B=x(()=>({fullscreen:i.value}));const r=x(()=>v[n.value]);let w=u(r.value.src);async function _(t){if(!t.big){if(!t.src.includes("/small/")){t.big=t.src;return}t.big=await I(t.src.replace("/small/","/")),console.log("got big image: ",t.src)}}async function h(){for(let t=0;t<a&&i.value;t++){let e=v[t];if(!e.big){await _(e);break}}}V(async()=>{setTimeout(async()=>{await _(r.value),w.value=r.value.big},1e3)}),E(()=>{});async function L(){i.value||(i.value=!0,document.body.style.overflow="hidden",await y(),await h())}function G(){i.value=!1,document.body.style.overflow=""}async function f(t){let e=n.value;t=="left"?(e--,e<0&&(e=0)):(e++,e>=a&&(e=a-1)),n.value=e;let g=v[e];m.value=!0,await _(g),m.value=!1,w.value=g.big,await y(),await h()}async function T(t){return await(await fetch(t)).blob()}async function I(t){return URL.createObjectURL(await T(t))}return(t,e)=>(o(),c("div",{class:b(s(B))},[l("img",{src:s(w),alt:r.value.alt,title:r.value.alt,class:b(s(D)),onClick:L},null,10,U),s(i)&&s(m)?(o(),c("div",z,"正在加载图片...")):d("",!0),s(i)?(o(),c("div",M,[l("div",{onClick:e[0]||(e[0]=g=>f("left")),class:"left_img_c"},[l("div",null,[s(a)>1&&s(n)>0?(o(),c("div",O,Y)):d("",!0)])]),l("div",j,[l("div",null,"第"+k(s(n)+1)+"/"+k(s(a))+"张",1)]),l("div",{onClick:e[1]||(e[1]=g=>f("right")),class:"right_img_c"},[l("div",null,[s(a)>1&&s(n)<s(a)-1?(o(),c("div",R,q)):d("",!0)])])])):d("",!0),s(i)?(o(),c("img",{key:2,src:S,class:"close_img",alt:"关闭全屏",title:"关闭全屏",onClick:G})):d("",!0)],2))}};export{F as _};
